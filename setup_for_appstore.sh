#!/bin/bash

# Simplistic Calculator - App Store Setup Script
# This script opens Xcode and provides next steps

set -e

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
cd "$SCRIPT_DIR"

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "  ğŸ“± Simplistic Calculator - App Store Setup"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âœ… Already Completed:"
echo "  â€¢ Professional calculator icon created"
echo "  â€¢ All 15 iOS icon sizes generated"
echo "  â€¢ Privacy manifest file created"
echo "  â€¢ Bundle ID updated to: com.morriswong.calculator"
echo "  â€¢ Support website ready with your email"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“‹ NEXT STEPS (Manual - Required for App Store):"
echo ""
echo "1. âš ï¸  REGISTER BUNDLE ID IN APPLE DEVELOPER PORTAL"
echo "   â€¢ Go to: https://developer.apple.com/account/resources/identifiers/list"
echo "   â€¢ Click '+' â†’ App IDs â†’ App"
echo "   â€¢ Description: Simplistic Calculator"
echo "   â€¢ Bundle ID: com.morriswong.calculator"
echo "   â€¢ Click Register"
echo ""
echo "2. ğŸ“± ADD PRIVACY FILE IN XCODE (Opening now...)"
echo "   â€¢ Xcode will open automatically"
echo "   â€¢ Right-click 'Runner' folder (in left panel)"
echo "   â€¢ Select 'Add Files to Runner...'"
echo "   â€¢ Navigate to: ios/Runner/PrivacyInfo.xcprivacy"
echo "   â€¢ âœ“ Check 'Copy items if needed'"
echo "   â€¢ âœ“ Select 'Runner' target"
echo "   â€¢ Click 'Add'"
echo ""
echo "3. ğŸŒ DEPLOY SUPPORT WEBSITE"
echo "   Option A - GitHub Pages (Quick):"
echo "     â€¢ Create repo: simplistic-calculator-support"
echo "     â€¢ Upload: support/index.html as index.html"
echo "     â€¢ Enable GitHub Pages in repo settings"
echo "     â€¢ URL will be: https://morriswong.github.io/simplistic-calculator-support/"
echo ""
echo "   Option B - Use this repo (if public):"
echo "     â€¢ Host support/index.html directly from this repo"
echo ""
echo "4. ğŸ“¦ BUILD & ARCHIVE IN XCODE"
echo "   â€¢ Select 'Any iOS Device (arm64)' from device dropdown"
echo "   â€¢ Product â†’ Clean Build Folder"
echo "   â€¢ Product â†’ Archive (wait 2-5 minutes)"
echo ""
echo "5. ğŸš€ UPLOAD TO APP STORE CONNECT"
echo "   â€¢ In Archives window â†’ Distribute App"
echo "   â€¢ Select 'App Store Connect' â†’ Upload"
echo ""
echo "6. ğŸ“ COMPLETE APP STORE METADATA"
echo "   â€¢ Go to: https://appstoreconnect.apple.com"
echo "   â€¢ Create new app with bundle ID: com.morriswong.calculator"
echo "   â€¢ Fill in description (see PUBLISHING_GUIDE.md)"
echo "   â€¢ Upload screenshots from Simulator"
echo "   â€¢ Set privacy: No data collection"
echo "   â€¢ Submit for review"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“– FULL GUIDE: See PUBLISHING_GUIDE.md for detailed instructions"
echo ""
echo "ğŸ”§ FILES TO REFERENCE:"
echo "  â€¢ App Icon: assets/icon.png (1024x1024)"
echo "  â€¢ Privacy File: ios/Runner/PrivacyInfo.xcprivacy"
echo "  â€¢ Support Site: support/index.html"
echo "  â€¢ Bundle ID: com.morriswong.calculator"
echo "  â€¢ Support Email: morriswch@gmail.com"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Opening Xcode workspace in 3 seconds..."
sleep 3

# Open Xcode
open ios/Runner.xcworkspace

echo ""
echo "âœ… Xcode opened! Follow steps 2-6 above to complete App Store submission."
echo ""
echo "ğŸ’¡ TIP: Keep this terminal window open for reference"
echo ""
